<!DOCTYPE html>
<head>
    <title>Evaluation form</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="index.css">
</head>
<body>

    <h1 id="welcomeHeading">Welcome</h1>
    <div id="screenSizeWarning" class="page">
        <h2 style="color: red;">Screen size too small</h2>
        <p>The size of your screen is too small to effectively display the tasks. Please switch to a larger screen, specifically a computer monitor larger than 1000x600.</p>
        <p id="screenSize"></p>
    </div>

    <div id="consentPage" class="page">
        <h2>Consent</h2>
        <p>
            In this task, you will be presented with computer-generated images of groups of trees. We are interested in seeing how you perceive these images. The task will take 10-20 minutes.
        </p>
        <br>
        <p>
            By clicking "Continue" below, you agree to take part in this study. Data from this study will be be kept confidential and only shown in aggregate form. This study is conducted in accordance with the ethical guidelines of KTH Royal Institute of Technology.
        </p>
        <br>
            
        <button id="continueButton" class="centerButton" disabled onclick="continueButtonPressed()">Continue</button>
    </div>

    <div id="instructionPage" style="" class="page">
        <h1>Instructions</h1>
        <p>
            In each trial of this experiment, you will be shown three images: one <strong>reference image</strong>, and two images for you to choose between. There will be 84 trials in total.
        </p>
        <br>
        <p>
            <span style="color: red;">YOUR TASK</span> is to choose which one of the two images you think contains the same collection of trees as the reference. On the next page, you will be shown an example.
        </p>
        <br>
        <p>
            <span style="color: red;">TIME LIMIT:</span> There is no time limit for the experiment, but for each trial, the images will be shuffled/updated if you haven't chosen within 20 seconds.
        </p>
        <br>
        <p>
            If the page contents look like they don't fit the window at any point, please zoom the page out by pressing CTRL and - together. (If you are using a Mac, press Command instead of CTRL.)
        </p>
        <br>
        <button id="refStartButton" class="centerButton" onclick="startButtonPressed()">Continue</button>

    </div>

    <div id="referencePage" class="page">
        <h1 style="color: red;">Example</h1>
        <p>
            Below is an example of the task. The first image (top) is the <strong>reference</strong>. In each task, you will need to compare the two choice images (bottom) to the reference image. You will choose by clicking either the 'left' or 'right' button.
        </p>
        <br>
        <div style="display: flex; flex-direction: column; margin-top: 1em;">
            <img style="height: 7em; object-fit: contain; margin-bottom: 1em;" src="img/T200R50.jpg">
            <div style="display: flex; justify-content: center;">
                <img style="height: 7em; margin-right: 0.5em;" src="img/T200R50.jpg">
                <img style="height: 7em; margin-left: 0.5em;" src="img/T200R50.jpg">
            </div>
        </div>
        <br>
        <button id="trialStartButton" class="centerButton" disabled onclick="trialStartButtonPressed()">START TASK</button>
    </div>

    <div id="trialPage" class="page">
        <h2 id="trialNumber">Trial x/y</h2>
      <div id="imagesContainer">
        <div id="refImageContainer">
          <table>
              <tr>
                  <td>
                      <img id="refImage">
                  </td>
              </tr>
          </table>
        </div>
      <div id="imagesContainer" style="">
        <div id="stimuliContainer">
          <div id="leftImageContainer">
            <table>
                <tr>
                    <td>
                        <img id="leftImage">
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="realismButton" onclick="realismSubmit(this.innerHTML)">Left</button>
                    </td>
                </tr>
            </table>
          </div>
          <div id="rightImageContainer">
              <table>
                  <tr>
                      <td>
                          <img id="rightImage">
                      </td>
                  </tr>
                  <tr>
                      <td>
                        <button class="realismButton" onclick="realismSubmit(this.innerHTML)">Right</button>
                      </td>
                  </tr>
              </table>
          </div>
        </div>
      </div>
      <h1 id="trialHeading">Which image shows the same collection of trees as the reference?</h1>
      

    </div>
    </div>

    <div id="demographicsPage" class="page">
        <h2>Demographics</h2>
        <table>
            <tr>
                <td>
                    <p><span class="red">* marks a required question</span></p>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="gender">What is your gender?</label>
                    <select name="gender">
                        <option>Male</option>
                        <option>Female</option>
                        <option>Non-binary</option>
                        <option>Other</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="age">What is your age?</label>
                    <input name="age" type="number">
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="device">What device are you using to view this experiment?</label>
                    <select name="device">
                        <option>Desktop computer</option>
                        <option>Laptop (e.g. Macbook, HP, etc)</option>
                        <option>Tablet (e.g. iPad, Galaxy Tab, etc)</option>
                        <option>Smartphone</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="education">What is the highest level of education you have completed?</label>
                    <select name="education">
                        <option>Less than high school degree</option>
                        <option>High school degree or equivalent (e.g., GED)</option>
                        <option>Some college but no degree</option>
                        <option>Bachelor degree</option>
                        <option>Master degree</option>
                        <option>Professional degree</option>
                        <option>Doctoral degree</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="experience">What is your experience with computer graphics?</label>
                    <select name="experience">
                        <option>I have never interacted with computer graphics</option>
                        <option>I have seen computer graphics on tv, in films, in video games or in other media</option>
                        <option>I have limited experience creating computer graphics (e.g. as a hobby or in a university course)</option>
                        <option>I have professional experience creating computer graphics</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="vision">How is your vision?</label>
                    <select name="vision">
                        <option>normal vision</option>
                        <option>corrected-to-normal vision (i.e. glasses, contact lenses)</option>
                        <option>other</option>
                    </select>
                    <span class="red">*</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="comments">Do you have any comments or feedback on the task?</label>
                </td>
            </tr>
            <tr>
                <td>
                    <textarea name="comments" rows="10" cols="100"></textarea>
                </td>
            </tr>
        </table>

        <button id="completionButton" class="centerButton" onclick="verifyAndGatherData()">Finish</button>
    </div>

    <!-- This is the original form with the original action, which is no longer available. Replace it with your own URL, or solve it some other way. -->
    <form id="dataForm" method="POST" action="https://script.google.com/macros/s/AKfycbwLmr_tVveXi5kPhTuIWapbCgvbniS4OQganUVlZNIW0RfRfz1Q2FgtrAmfm1pV71Fw6w/exec" target="iframe">
        <input name="Data" type="hidden">
    </form>

    <iframe name="iframe" style="position: absolute; visibility: hidden"></iframe>

    <div id="endPage" class="page">
        <h2>Thank you!</h2>
        <br/>
        <p>
            Your responses have been submitted. 
        </p>
        <br>
        <p>
            If you have any questions, please contact me at amanimn@kth.se.
        </p>
    </div>

    <img style="display: none;" class="preloadImage" src="img/TD200random35.jpg">
    <img style="display: none;" class="preloadImage" src="img/TD200random45.jpg">
    <img style="display: none;" class="preloadImage" src="img/TD200random50.jpg">
    <img style="display: none;" class="preloadImage" src="img/TD200random60.jpg">

    <script src="https://www.hes.kyushu-u.ac.jp/~kurokid/QUEST/dist/jsQUEST.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="index.js"></script>
</body>